(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(9),i=n.n(r),o=n(4),c=n(7),s=n(5),l="GET_URL_PARAMS",u="ADD_ROLE",d="REPEAT_ROUND",f="SET_SIZE",p={token:"",user:"",role:"",repeatRound:!1,size:{}};var j=function(e){return{type:d,payload:e}},x="GET_GAME_STATE",b={field:{},moveRole:"master",gameScore:{},winResult:{winStatus:!1,res:"",combination:0}};var O,h,m,v,y,g,w,R,S,k,E,_,T=Object(c.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(s.a)(Object(s.a)({},e),{},{token:t.payload.token,user:t.payload.user});case u:return Object(s.a)(Object(s.a)({},e),{},{role:t.payload});case d:return Object(s.a)(Object(s.a)({},e),{},{repeatRound:t.payload});case f:return Object(s.a)(Object(s.a)({},e),{},{size:t.payload});default:return e}},gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(s.a)(Object(s.a)({},e),{},{field:t.payload.data.field,moveRole:t.payload.data.moveRole,gameScore:t.payload.gameScore,winResult:t.payload.winResult});default:return e}}}),M=n(19),z=n(6),B=n.n(z),G=n(8),A=function(){var e=function(){var e=Object(G.a)(B.a.mark((function e(t){var n,a,r,i,o,c=arguments;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"GET",a=c.length>2&&void 0!==c[2]?c[2]:null,r=c.length>3&&void 0!==c[3]?c[3]:{},e.prev=3,a&&(a=JSON.stringify(a),r["Content-Type"]="application/json"),e.next=7,fetch(t,{method:n,body:a,headers:r});case 7:return i=e.sent,e.next=10,i.json();case 10:return o=e.sent,e.abrupt("return",o);case 14:e.prev=14,e.t0=e.catch(3),console.log("error");case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return{postUserData:function(){var t=Object(G.a)(B.a.mark((function t(n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("/api/session/SessionStart","POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getGameData:function(){var t=Object(G.a)(B.a.mark((function t(n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("/api/session/GameUpdate","POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),postMoveData:function(){var t=Object(G.a)(B.a.mark((function t(n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("/api/session/MakeMove","POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),postRepeatRound:function(){var t=Object(G.a)(B.a.mark((function t(n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("/api/session/RepeatRound","POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},F=function(e){return function(t){return function(n){switch(n.type){case"GET_URL_PARAMS":var a=n.payload,r=a.token,i=a.user,o=a.name;(0,A().postUserData)({token:r,user:i,name:o}).then((function(t){var n;t&&e.dispatch((n=t.role,{type:u,payload:n}))})),e.dispatch({type:"START_GAME",payload:r});break;case"REPEAT_ROUND":var c=e.getState().app,s=c.token,l=c.role;(0,A().postRepeatRound)({token:s,role:l})}t(n)}}},D=function(e){return function(t){return function(n){switch(n.type){case"START_GAME":var a=A().getGameData,r=n.payload;setInterval((function(){var t=e.getState().gameState;a({token:r}).then((function(n){n&&JSON.stringify(function(e){return{field:e.data.field,moveRole:e.data.moveRole,gameScore:e.gameScore,winResult:e.winResult}}(n))!==JSON.stringify(t)&&e.dispatch({type:x,payload:n})}))}),1e3);break;case"MAKE_MOVE":var i=e.getState().app.token,o=A().postMoveData,c=n.payload,s=c.newMove,l=c.field,u=c.role,d=c.moveRole,f=Object.assign({},l);f[s]="master"===u?"x":"y",o({data:{field:f,moveRole:"master"===d?"guest":"master"},token:i});break;case"GET_GAME_STATE":var p=e.getState().app.repeatRound,b=n.payload.data;b&&Object.values(b.field).every((function(e){return"false"===e.toString()}))&&p&&e.dispatch(j(!1))}t(n)}}},L=[M.a,F,D],U=c.a.apply(void 0,L),I=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.c,P=Object(c.d)(T,I(U)),C=n(2),N=n(3),J={item1:{x:0,y:0},item2:{x:33,y:0},item3:{x:66,y:0},item4:{x:0,y:33},item5:{x:33,y:33},item6:{x:66,y:33},item7:{x:0,y:66},item8:{x:33,y:66},item9:{x:66,y:66}},X={item1:{x1:16.5,y1:16.5,x2:82.5,y2:16.5},item2:{x1:16.5,y1:49.5,x2:82.5,y2:49.5},item3:{x1:16.5,y1:82.5,x2:82.5,y2:82.5},item4:{x1:16.5,y1:16.5,x2:16.5,y2:82.5},item5:{x1:49.5,y1:16.5,x2:49.5,y2:82.5},item6:{x1:82.5,y1:16.5,x2:82.5,y2:82.5},item7:{x1:16.5,y1:16.5,x2:82.5,y2:82.5},item8:{x1:16.5,y1:82.5,x2:82.5,y2:16.5}},V=n(1),W=function(e){var t=e.num;return Object(V.jsxs)("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 68 68",x:J["item".concat(t+1)].x+7,y:J["item".concat(t+1)].y+7,children:[Object(V.jsx)("defs",{}),Object(V.jsx)("g",{filter:"url(#filterX)",children:Object(V.jsx)("path",{fill:"#4F4F4F",fillRule:"evenodd",d:"M4.879 4.995a3 3 0 000 4.243L29.639 34 4.88 58.76a3 3 0 000 4.243l.116.117a3 3 0 004.243 0l24.76-24.762L58.76 63.121a3 3 0 004.242 0l.117-.117a3 3 0 000-4.243L38.36 34l24.76-24.762a3 3 0 000-4.243l-.117-.116a3 3 0 00-4.242 0L33.999 29.64 9.238 4.88a3 3 0 00-4.243 0l-.116.116z",clipRule:"evenodd"})}),Object(V.jsx)("path",{fill:"#9B51E0",fillRule:"evenodd",d:"M2.879 2.995a3 3 0 000 4.243L27.639 32 2.88 56.76a3 3 0 000 4.243l.116.117a3 3 0 004.243 0l24.76-24.762L56.76 61.121a3 3 0 004.242 0l.117-.117a3 3 0 000-4.243L36.36 32l24.76-24.762a3 3 0 000-4.243l-.117-.116a3 3 0 00-4.242 0L31.999 27.64 7.238 2.88a3 3 0 00-4.243 0l-.116.116z",clipRule:"evenodd"}),Object(V.jsx)("defs",{children:Object(V.jsxs)("filter",{id:"filterX",width:"67.998",height:"67.999",x:"0",y:"0",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[Object(V.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(V.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Object(V.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur",stdDeviation:"2"})]})})]})},H=function(e){var t=e.num;return Object(V.jsxs)("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 68 68",x:J["item".concat(t+1)].x+7,y:J["item".concat(t+1)].y+7,children:[Object(V.jsx)("defs",{}),Object(V.jsx)("g",{filter:"url(#filterO)",children:Object(V.jsx)("path",{fill:"#4F4F4F",fillRule:"evenodd",d:"M34 64c16.569 0 30-13.431 30-30C64 17.431 50.569 4 34 4 17.431 4 4 17.431 4 34c0 16.569 13.431 30 30 30zm-.17-6.34c13.16 0 23.83-10.67 23.83-23.83C57.66 20.67 46.99 10 33.83 10 20.67 10 10 20.67 10 33.83c0 13.16 10.67 23.83 23.83 23.83z",clipRule:"evenodd"})}),Object(V.jsx)("path",{fill:"#2F80ED",fillRule:"evenodd",d:"M32 62c16.569 0 30-13.431 30-30C62 15.431 48.569 2 32 2 15.431 2 2 15.431 2 32c0 16.569 13.431 30 30 30zm-.17-6.34c13.16 0 23.83-10.67 23.83-23.83C55.66 18.67 44.99 8 31.83 8 18.67 8 8 18.67 8 31.83c0 13.16 10.67 23.83 23.83 23.83z",clipRule:"evenodd"}),Object(V.jsx)("defs",{children:Object(V.jsxs)("filter",{id:"filterO",width:"68",height:"68",x:"0",y:"0",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[Object(V.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(V.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Object(V.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur",stdDeviation:"2"})]})})]})},K=N.a.rect(O||(O=Object(C.a)(["\n  fill: none;\n  pointer-events: ",";\n"])),(function(e){return e.active?"all":"none"})),Q=function(e){var t=e.role,n=e.field,a=e.moveRole,r=Object(o.b)();return Object.entries(n).map((function(e,i){return Object(V.jsxs)("g",{children:[Object(V.jsx)(K,{width:"33",height:"33",x:J["item".concat(i+1)].x,y:J["item".concat(i+1)].y,active:!e[1]&&t===a,result:e[1].toString(),onClick:function(){return r({type:"MAKE_MOVE",payload:{newMove:e[0],field:n,role:t,moveRole:a}})}}),"x"===e[1]?Object(V.jsx)(W,{num:i}):"y"===e[1]?Object(V.jsx)(H,{num:i}):""]},i)}))},Z=Object(N.b)(h||(h=Object(C.a)(["\n  to {\n    stroke-dashoffset: 0;\n  }\n"]))),q=N.a.g(m||(m=Object(C.a)(["\n  & line {\n    stroke-dasharray: 300;\n    stroke-dashoffset: 300;\n    animation: "," 2s ease-out forwards;\n  }\n"])),Z),Y=function(e){var t=e.winResult,n=e.role;return Object(V.jsx)(q,{children:Object(V.jsx)("line",{x1:X["item".concat(t.combination)].x1,y1:X["item".concat(t.combination)].y1,x2:X["item".concat(t.combination)].x2,y2:X["item".concat(t.combination)].y2,stroke:t.res===n?"#219653":"#EB5757",strokeWidth:"3",strokeLinecap:"round"})})},$=Object(N.b)(v||(v=Object(C.a)(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]))),ee=N.a.div(y||(y=Object(C.a)(["\n  width: 90%;\n  height: 50%;\n"]))),te=N.a.svg(g||(g=Object(C.a)(["\n  width: 100%;\n  height: 100%;\n  & line {\n    filter: drop-shadow(1px 1px 0.5px rgba(0, 0, 0, 0.25));\n  }\n  & g svg {\n    animation: 0.5s "," ease-out;\n  }\n"])),$),ne=function(){var e=Object(o.c)((function(e){return{role:e.app.role||"",field:e.gameState.field||{},moveRole:e.gameState.moveRole||"",winResult:e.gameState.winResult||{}}})),t=e.role,n=e.field,a=e.moveRole,r=e.winResult;return Object(V.jsx)(ee,{children:Object(V.jsxs)(te,{viewBox:"0 0 99 99",children:[Object(V.jsx)("line",{x1:"0",y1:"33",x2:"99",y2:"33",stroke:"#2d9cdb"}),Object(V.jsx)("line",{x1:"0",y1:"66",x2:"99",y2:"66",stroke:"#2d9cdb"}),Object(V.jsx)("line",{x1:"33",y1:"0",x2:"33",y2:"99",stroke:"#2d9cdb"}),Object(V.jsx)("line",{x1:"66",y1:"0",x2:"66",y2:"99",stroke:"#2d9cdb"}),Object(V.jsx)(Q,{moveRole:a,field:n,role:t}),r.winStatus&&Object(V.jsx)(Y,{winResult:r,role:t})]})})},ae=n(11),re=N.a.div(w||(w=Object(C.a)(["\n  text-align: center;\n  font-size: 1.5em;\n  text-transform: uppercase;\n  font-family: sans-serif;\n  font-weight: 200;\n  color: #56ccf2;\n  text-shadow: 2px 2px 4px #4f4f4f;\n  @media (orientation: landscape) {\n    font-size: 1em;\n  }\n"]))),ie=N.a.div(R||(R=Object(C.a)(["\n  height: 15%;\n  display: flex;\n  align-items: center;\n"]))),oe=function(){var e=Object(o.c)((function(e){return{role:e.app.role||"",moveRole:e.gameState.moveRole||"",winResult:e.gameState.winResult||!1}})),t=e.role,n=e.moveRole,r=e.winResult,i=Object(a.useState)(""),c=Object(ae.a)(i,2),s=c[0],l=c[1];return Object(a.useEffect)((function(){var e="";e=r.winStatus?r.res===t?"\u041f\u043e\u0431\u0435\u0434\u0430!":"\u0412 \u0434\u0440\u0443\u0433\u043e\u0439 \u0440\u0430\u0437!":t===n?"\u0422\u0432\u043e\u0439 \u0445\u043e\u0434":"\u0425\u043e\u0434 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430",l(e)}),[r,t,n]),Object(V.jsx)(ie,{children:Object(V.jsx)(re,{children:s})})},ce=N.a.div(S||(S=Object(C.a)(["\n  height: 15%;\n  display: flex;\n  align-items: center;\n  margin: 2.5% 0;\n"]))),se=N.a.button(k||(k=Object(C.a)(["\n  position: relative;\n  background: linear-gradient(92.1deg, #2f80ed 0%, #bb6bd9 100%);\n  font-family: sans-serif;\n  font-weight: bold;\n  font-size: 24px;\n  text-transform: uppercase;\n  padding: 0.7em 3em;\n  border-radius: 1.3em;\n  border: none;\n  box-shadow: 2px 2px 4px #4f4f4f;\n  outline: none;\n  & span {\n    background: #2f2f2f;\n    color: transparent;\n    text-shadow: 2px 2px 3px #aa6edc;\n    -webkit-background-clip: text;\n    -moz-background-clip: text;\n    background-clip: text;\n  }\n  &:active {\n    box-shadow: inset 2px 2px 4px #4f4f4f;\n    & span {\n      background: transparent;\n      color: #aa6edc;\n      text-shadow: 2px 2px 3px #4f4f4f;\n    }\n  }\n  @media (orientation: landscape) {\n    font-size: 1em;\n  }\n"]))),le=function(){var e=Object(o.c)((function(e){return{repeatRound:e.app.repeatRound||!1,field:e.gameState.field}})),t=e.repeatRound,n=e.field,r=Object(a.useState)("\u0415\u0449\u0435 \u0440\u0430\u0437"),i=Object(ae.a)(r,2),c=i[0],s=i[1],l=Object(o.b)();Object(a.useEffect)((function(){s(t?"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430":"\u0415\u0449\u0435 \u0440\u0430\u0437")}),[t]);return Object(V.jsx)(ce,{children:t?Object(V.jsx)(re,{children:c}):Object(V.jsx)(se,{onClick:function(){var e=Object.values(n).every((function(e){return"false"===e.toString()}));setTimeout((function(){!e&&l(j(!0))}),500)},children:Object(V.jsx)("span",{children:c})})})},ue=N.a.div(E||(E=Object(C.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(345.45deg, #bb6bd9 0%, #2f80ed 100%);\n"]))),de=N.a.div(_||(_=Object(C.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  height: 100vh;\n  margin: auto;\n  width: ",";\n"])),(function(e){var t=e.size;return t?"".concat(t.width,"px"):"100%"})),fe=function(){var e=Object(o.c)((function(e){return{size:e.app.size||{}}})).size;return Object(V.jsx)(ue,{children:Object(V.jsxs)(de,{size:e,children:[Object(V.jsx)(oe,{}),Object(V.jsx)(ne,{}),Object(V.jsx)(le,{})]})})},pe=n(23),je=n.n(pe),xe=function(e){var t=Object(o.b)(),n=je.a.parse(window.location.search,{ignoreQueryPrefix:!0});return Object(a.useEffect)((function(){t({type:l,payload:n})})),Object(V.jsx)(a.Fragment,{children:e.children})},be=function(e){var t=Object(o.b)(),n=function(){var e=0;e=window.innerWidth>window.innerHeight?window.innerHeight:window.innerWidth,t({type:f,payload:{width:e}})};return Object(a.useEffect)((function(){return n(),window.addEventListener("resize",n,!0),function(){return window.removeEventListener("resize",n)}})),Object(V.jsx)(a.Fragment,{children:e.children})};i.a.render(Object(V.jsx)(o.a,{store:P,children:Object(V.jsx)(xe,{children:Object(V.jsx)(be,{children:Object(V.jsx)(fe,{})})})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.53dfb5d9.chunk.js.map