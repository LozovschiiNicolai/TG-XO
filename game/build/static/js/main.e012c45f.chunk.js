(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(9),i=n.n(r),c=n(4),o=n(7),s=n(5),l="GET_URL_PARAMS",d="ADD_ROLE",u="REPEAT_ROUND",p="SET_SIZE",f="CHANGE_LOADER",b="STATUS_LOADER",j={token:"",user:"",role:"",repeatRound:!1,size:{},loader:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430",statusLoader:!1};var x=function(e){return{type:u,payload:e}},h=function(e){return{type:f,payload:e}},O=function(e){return{type:b,payload:e}},m="GET_GAME_STATE",g={field:{},moveRole:"master",gameScore:{},winResult:{winStatus:!1,res:"",combination:0}};var y,v,w,R,S,k,E,T,_,z,L,A,M,G,B,D,F,U,I=Object(o.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(s.a)(Object(s.a)({},e),{},{token:t.payload.token,user:t.payload.user});case d:return Object(s.a)(Object(s.a)({},e),{},{role:t.payload});case u:return Object(s.a)(Object(s.a)({},e),{},{repeatRound:t.payload});case p:return Object(s.a)(Object(s.a)({},e),{},{size:t.payload});case f:return Object(s.a)(Object(s.a)({},e),{},{loader:t.payload});case b:return Object(s.a)(Object(s.a)({},e),{},{statusLoader:t.payload});default:return e}},gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(s.a)(Object(s.a)({},e),{},{field:t.payload.data.field,moveRole:t.payload.data.moveRole,gameScore:t.payload.gameScore,winResult:t.payload.winResult});default:return e}}}),P=n(19),C=n(6),N=n.n(C),J=n(8),X=function(){var e=function(){var e=Object(J.a)(N.a.mark((function e(t){var n,a,r,i,c,o=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"GET",a=o.length>2&&void 0!==o[2]?o[2]:null,r=o.length>3&&void 0!==o[3]?o[3]:{},e.prev=3,a&&(a=JSON.stringify(a),r["Content-Type"]="application/json"),e.next=7,fetch(t,{method:n,body:a,headers:r});case 7:return i=e.sent,e.next=10,i.json();case 10:return c=e.sent,e.abrupt("return",c);case 14:e.prev=14,e.t0=e.catch(3),console.log("error");case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return{postUserData:function(){var t=Object(J.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("/api/session/SessionStart","POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getGameData:function(){var t=Object(J.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("/api/session/GameUpdate","POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),postMoveData:function(){var t=Object(J.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("/api/session/MakeMove","POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),postRepeatRound:function(){var t=Object(J.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("/api/session/RepeatRound","POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},H=function(e){return function(t){return function(n){switch(n.type){case"GET_URL_PARAMS":var a=n.payload,r=a.token,i=a.user,c=a.name;(0,X().postUserData)({token:r,user:i,name:c}).then((function(t){var n;t&&e.dispatch((n=t.role,{type:d,payload:n}))})),e.dispatch({type:"START_GAME",payload:r});break;case"REPEAT_ROUND":var o=e.getState().app,s=o.token,l=o.role;(0,X().postRepeatRound)({token:s,role:l})}t(n)}}},V=function(e){return function(t){return function(n){switch(n.type){case"START_GAME":var a=X().getGameData,r=n.payload;setInterval((function(){var t=e.getState().gameState;a({token:r}).then((function(n){n&&JSON.stringify(function(e){return{field:e.data.field,moveRole:e.data.moveRole,gameScore:e.gameScore,winResult:e.winResult}}(n))!==JSON.stringify(t)&&e.dispatch({type:m,payload:n})}))}),1e3);break;case"MAKE_MOVE":var i=e.getState().app.token,c=X().postMoveData,o=n.payload,s=o.newMove,l=o.field,d=o.role,u=o.moveRole,p=Object.assign({},l);p[s]="master"===d?"x":"y",c({data:{field:p,moveRole:"master"===u?"guest":"master"},token:i});break;case"GET_GAME_STATE":var f=e.getState().app,b=f.repeatRound,j=f.loader,g=n.payload,y=g.data,v=g.gameScore;y&&Object.values(y.field).every((function(e){return"false"===e.toString()}))&&b&&(e.dispatch(x(!1)),e.dispatch(O(!0)),setTimeout((function(){e.dispatch(O(!1))}),2e3)),j.length&&(v.master&&!v.guest?e.dispatch(h("\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430")):v.master&&v.guest&&e.dispatch(h("")))}t(n)}}},W=[P.a,H,V],K=o.a.apply(void 0,W),Q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,Z=Object(o.d)(I,Q(K)),q=n(2),Y=n(3),$={item1:{x:0,y:0},item2:{x:33,y:0},item3:{x:66,y:0},item4:{x:0,y:33},item5:{x:33,y:33},item6:{x:66,y:33},item7:{x:0,y:66},item8:{x:33,y:66},item9:{x:66,y:66}},ee={item1:{x1:16.5,y1:16.5,x2:82.5,y2:16.5},item2:{x1:16.5,y1:49.5,x2:82.5,y2:49.5},item3:{x1:16.5,y1:82.5,x2:82.5,y2:82.5},item4:{x1:16.5,y1:16.5,x2:16.5,y2:82.5},item5:{x1:49.5,y1:16.5,x2:49.5,y2:82.5},item6:{x1:82.5,y1:16.5,x2:82.5,y2:82.5},item7:{x1:16.5,y1:16.5,x2:82.5,y2:82.5},item8:{x1:16.5,y1:82.5,x2:82.5,y2:16.5}},te=n(1),ne=function(e){var t=e.num;return Object(te.jsxs)("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 68 68",x:$["item".concat(t+1)].x+7,y:$["item".concat(t+1)].y+7,children:[Object(te.jsx)("defs",{}),Object(te.jsx)("g",{filter:"url(#filterX)",children:Object(te.jsx)("path",{fill:"#4F4F4F",fillRule:"evenodd",d:"M4.879 4.995a3 3 0 000 4.243L29.639 34 4.88 58.76a3 3 0 000 4.243l.116.117a3 3 0 004.243 0l24.76-24.762L58.76 63.121a3 3 0 004.242 0l.117-.117a3 3 0 000-4.243L38.36 34l24.76-24.762a3 3 0 000-4.243l-.117-.116a3 3 0 00-4.242 0L33.999 29.64 9.238 4.88a3 3 0 00-4.243 0l-.116.116z",clipRule:"evenodd"})}),Object(te.jsx)("path",{fill:"#9B51E0",fillRule:"evenodd",d:"M2.879 2.995a3 3 0 000 4.243L27.639 32 2.88 56.76a3 3 0 000 4.243l.116.117a3 3 0 004.243 0l24.76-24.762L56.76 61.121a3 3 0 004.242 0l.117-.117a3 3 0 000-4.243L36.36 32l24.76-24.762a3 3 0 000-4.243l-.117-.116a3 3 0 00-4.242 0L31.999 27.64 7.238 2.88a3 3 0 00-4.243 0l-.116.116z",clipRule:"evenodd"}),Object(te.jsx)("defs",{children:Object(te.jsxs)("filter",{id:"filterX",width:"67.998",height:"67.999",x:"0",y:"0",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[Object(te.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(te.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Object(te.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur",stdDeviation:"2"})]})})]})},ae=function(e){var t=e.num;return Object(te.jsxs)("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 68 68",x:$["item".concat(t+1)].x+7,y:$["item".concat(t+1)].y+7,children:[Object(te.jsx)("defs",{}),Object(te.jsx)("g",{filter:"url(#filterO)",children:Object(te.jsx)("path",{fill:"#4F4F4F",fillRule:"evenodd",d:"M34 64c16.569 0 30-13.431 30-30C64 17.431 50.569 4 34 4 17.431 4 4 17.431 4 34c0 16.569 13.431 30 30 30zm-.17-6.34c13.16 0 23.83-10.67 23.83-23.83C57.66 20.67 46.99 10 33.83 10 20.67 10 10 20.67 10 33.83c0 13.16 10.67 23.83 23.83 23.83z",clipRule:"evenodd"})}),Object(te.jsx)("path",{fill:"#2F80ED",fillRule:"evenodd",d:"M32 62c16.569 0 30-13.431 30-30C62 15.431 48.569 2 32 2 15.431 2 2 15.431 2 32c0 16.569 13.431 30 30 30zm-.17-6.34c13.16 0 23.83-10.67 23.83-23.83C55.66 18.67 44.99 8 31.83 8 18.67 8 8 18.67 8 31.83c0 13.16 10.67 23.83 23.83 23.83z",clipRule:"evenodd"}),Object(te.jsx)("defs",{children:Object(te.jsxs)("filter",{id:"filterO",width:"68",height:"68",x:"0",y:"0",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[Object(te.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(te.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Object(te.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur",stdDeviation:"2"})]})})]})},re=Y.a.rect(y||(y=Object(q.a)(["\n  fill: none;\n  pointer-events: ",";\n"])),(function(e){return e.active?"all":"none"})),ie=function(e){var t=e.role,n=e.field,a=e.moveRole,r=Object(c.b)();return Object.entries(n).map((function(e,i){return Object(te.jsxs)("g",{children:[Object(te.jsx)(re,{width:"33",height:"33",x:$["item".concat(i+1)].x,y:$["item".concat(i+1)].y,active:!e[1]&&t===a,result:e[1].toString(),onClick:function(){return r({type:"MAKE_MOVE",payload:{newMove:e[0],field:n,role:t,moveRole:a}})}}),"x"===e[1]?Object(te.jsx)(ne,{num:i}):"y"===e[1]?Object(te.jsx)(ae,{num:i}):""]},i)}))},ce=Object(Y.b)(v||(v=Object(q.a)(["\n  to {\n    stroke-dashoffset: 0;\n  }\n"]))),oe=Y.a.g(w||(w=Object(q.a)(["\n  & line {\n    stroke-dasharray: 300;\n    stroke-dashoffset: 300;\n    animation: "," 2s ease-out forwards;\n  }\n"])),ce),se=function(e){var t=e.winResult,n=e.role;return Object(te.jsx)(oe,{children:Object(te.jsx)("line",{x1:ee["item".concat(t.combination)].x1,y1:ee["item".concat(t.combination)].y1,x2:ee["item".concat(t.combination)].x2,y2:ee["item".concat(t.combination)].y2,stroke:t.res===n?"#219653":"#EB5757",strokeWidth:"3",strokeLinecap:"round"})})},le=Object(Y.b)(R||(R=Object(q.a)(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]))),de=Y.a.div(S||(S=Object(q.a)(["\n  display: flex;\n  width: auto;\n  max-width: 90%;\n  height: 50%;\n"]))),ue=Y.a.svg(k||(k=Object(q.a)(["\n  height: 100%;\n  width: 100%;\n  & g svg {\n    animation: 0.5s "," ease-out;\n  }\n"])),le),pe=function(){var e=Object(c.c)((function(e){return{role:e.app.role||"",field:e.gameState.field||{},moveRole:e.gameState.moveRole||"",winResult:e.gameState.winResult||{}}})),t=e.role,n=e.field,a=e.moveRole,r=e.winResult;return Object(te.jsx)(de,{children:Object(te.jsxs)(ue,{viewBox:"0 0 99 99",children:[Object(te.jsxs)("g",{children:[Object(te.jsx)("rect",{x:"0",y:"33",width:"99",height:"2",fill:"rgba(0, 0, 0, 0.1)"}),Object(te.jsx)("rect",{x:"0",y:"66",width:"99",height:"2",fill:"rgba(0, 0, 0, 0.1)"}),Object(te.jsx)("rect",{x:"33",y:"0",width:"2",height:"99",fill:"rgba(0, 0, 0, 0.1)"}),Object(te.jsx)("rect",{x:"66",y:"0",width:"2",height:"99",fill:"rgba(0, 0, 0, 0.1)"})]}),Object(te.jsxs)("g",{children:[Object(te.jsx)("rect",{x:"0",y:"33",width:"99",height:"1",fill:"#2d9cdb"}),Object(te.jsx)("rect",{x:"0",y:"66",width:"99",height:"1",fill:"#2d9cdb"}),Object(te.jsx)("rect",{x:"33",y:"0",width:"1",height:"99",fill:"#2d9cdb"}),Object(te.jsx)("rect",{x:"66",y:"0",width:"1",height:"99",fill:"#2d9cdb"})]}),Object(te.jsx)(ie,{moveRole:a,field:n,role:t}),r.winStatus&&Object(te.jsx)(se,{winResult:r,role:t})]})})},fe=n(11),be=Y.a.div(E||(E=Object(q.a)(["\n  text-align: center;\n  font-size: 1.8em;\n  text-transform: uppercase;\n  font-family: sans-serif;\n  font-weight: 200;\n  color: #56ccf2;\n  text-shadow: 2px 2px 4px #4f4f4f;\n  @media (orientation: landscape) and (max-width: 1024px) {\n    font-size: 1em;\n  }\n"]))),je=Object(Y.b)(T||(T=Object(q.a)(["\n  0% {\n    transform: rotate(0);\n  }\n  100%{\n    transform: rotate(359deg);\n  }\n"]))),xe=Y.a.div(_||(_=Object(q.a)(["\n  width: 50px;\n  height: 50px;\n  border: 5px solid #56ccf2;\n  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.25);\n  border-top: 5px solid transparent;\n  border-radius: 50%;\n  margin-bottom: 25px;\n  animation: "," 0.5s linear 0s infinite;\n"])),je),he=Y.a.div(z||(z=Object(q.a)(["\n  height: 10%;\n  display: flex;\n  align-items: center;\n"]))),Oe=function(){var e=Object(c.c)((function(e){return{role:e.app.role||"",moveRole:e.gameState.moveRole||"",winResult:e.gameState.winResult||!1,statusLoader:e.app.statusLoader||!1}})),t=e.role,n=e.moveRole,r=e.winResult,i=e.statusLoader,o=Object(a.useState)(""),s=Object(fe.a)(o,2),l=s[0],d=s[1];return Object(a.useEffect)((function(){var e="";e=r.winStatus?r.res===t?"\u041f\u043e\u0431\u0435\u0434\u0430!":"\u0412 \u0434\u0440\u0443\u0433\u043e\u0439 \u0440\u0430\u0437!":t===n?"\u0422\u0432\u043e\u0439 \u0445\u043e\u0434":"\u0425\u043e\u0434 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430",d(e)}),[r,t,n]),Object(te.jsx)(he,{children:i?Object(te.jsx)(xe,{}):Object(te.jsx)(be,{children:l})})},me=Y.a.div(L||(L=Object(q.a)(["\n  height: 15%;\n  display: flex;\n  align-items: center;\n  margin: 2.5% 0;\n"]))),ge=Y.a.button(A||(A=Object(q.a)(["\n  position: relative;\n  background: linear-gradient(92.1deg, #2f80ed 0%, #bb6bd9 100%);\n  font-family: sans-serif;\n  font-weight: bold;\n  font-size: 24px;\n  text-transform: uppercase;\n  padding: 0.7em 3em;\n  border-radius: 1.3em;\n  border: none;\n  box-shadow: 2px 2px 4px #4f4f4f;\n  outline: none;\n  & span {\n    background: #2f2f2f;\n    color: transparent;\n    text-shadow: 2px 2px 3px #aa6edc;\n    -webkit-background-clip: text;\n    -moz-background-clip: text;\n    background-clip: text;\n  }\n  &:active {\n    box-shadow: inset 2px 2px 4px #4f4f4f;\n    & span {\n      background: transparent;\n      color: #aa6edc;\n      text-shadow: 2px 2px 3px #4f4f4f;\n    }\n  }\n  @media (orientation: landscape) {\n    font-size: 1em;\n  }\n"]))),ye=function(){var e=Object(c.c)((function(e){return{repeatRound:e.app.repeatRound||!1,field:e.gameState.field}})),t=e.repeatRound,n=e.field,r=Object(a.useState)("\u0415\u0449\u0435 \u0440\u0430\u0437"),i=Object(fe.a)(r,2),o=i[0],s=i[1],l=Object(c.b)();Object(a.useEffect)((function(){s(t?"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430":"\u0415\u0449\u0435 \u0440\u0430\u0437")}),[t]);return Object(te.jsx)(me,{children:t?Object(te.jsx)(be,{children:o}):Object(te.jsx)(ge,{onClick:function(){var e=Object.values(n).every((function(e){return"false"===e.toString()}));setTimeout((function(){!e&&l(x(!0))}),500)},children:Object(te.jsx)("span",{children:o})})})},ve=Y.a.div(M||(M=Object(q.a)(["\n  height: 10%;\n  margin-top: 2.5%;\n  width: 90%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  @media (orientation: landscape) {\n    width: 50%;\n  }\n"]))),we=Y.a.div(G||(G=Object(q.a)(["\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 8em;\n  &:last-of-type {\n    flex-direction: row-reverse;\n    margin-left: 5%;\n  }\n"]))),Re=Y.a.div(B||(B=Object(q.a)(["\n  background: linear-gradient(135deg, #2f80ed 0%, #bb6bd9 100%);\n  font-family: sans-serif;\n  font-size: 45px;\n  text-transform: uppercase;\n  box-shadow: 2px 2px 4px #4f4f4f;\n  outline: none;\n  height: 1.37em;\n  width: 1.37em;\n  text-align: center;\n  border-radius: 50%;\n  font-weight: lighter;\n  @media (orientation: landscape) {\n    font-size: 2em;\n  }\n  & span {\n    display: inline-block;\n    vertical-align: middle;\n    background: #2f2f2f;\n    color: transparent;\n    text-shadow: 2px 2px 3px #487ce9;\n    -webkit-background-clip: text;\n    -moz-background-clip: text;\n    background-clip: text;\n  }\n"]))),Se=Object(Y.a)(be)(D||(D=Object(q.a)(["\n  position: absolute;\n"]))),ke=function(){var e=Object(c.c)((function(e){return{gameScore:e.gameState.gameScore||{}}})).gameScore;return Object(te.jsxs)(ve,{children:[Object(te.jsx)(Se,{children:":"}),Object.values(e).map((function(e,t){return Object(te.jsxs)(we,{children:[Object(te.jsx)(Re,{children:Object(te.jsx)("span",{children:(n=e.name,n.split("")[0])})}),Object(te.jsx)(be,{children:e.score})]},t);var n}))]})},Ee=Y.a.div(F||(F=Object(q.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(345.45deg, #bb6bd9 0%, #2f80ed 100%);\n"]))),Te=Y.a.div(U||(U=Object(q.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  height: 100vh;\n  margin: auto;\n  width: ",";\n"])),(function(e){var t=e.size;return t?"".concat(t.width,"px"):"100%"})),_e=function(){var e=Object(c.c)((function(e){return{size:e.app.size||{}}})).size;return Object(te.jsx)(Ee,{children:Object(te.jsxs)(Te,{size:e,children:[Object(te.jsx)(ke,{}),Object(te.jsx)(Oe,{}),Object(te.jsx)(pe,{}),Object(te.jsx)(ye,{})]})})},ze=n(23),Le=n.n(ze),Ae=function(e){var t=Object(c.b)(),n=Le.a.parse(window.location.search,{ignoreQueryPrefix:!0});return Object(a.useEffect)((function(){t({type:l,payload:n})})),Object(te.jsx)(a.Fragment,{children:e.children})},Me=function(e){var t=Object(c.b)(),n=function(){var e=0;e=window.outerWidth>window.outerHeight?window.outerHeight:window.outerWidth,t({type:p,payload:{width:e}})};return Object(a.useEffect)((function(){return n(),window.addEventListener("resize",n,!0),function(){return window.removeEventListener("resize",n)}})),Object(te.jsx)(a.Fragment,{children:e.children})};i.a.render(Object(te.jsx)(c.a,{store:Z,children:Object(te.jsx)(Ae,{children:Object(te.jsx)(Me,{children:Object(te.jsx)(_e,{})})})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.e012c45f.chunk.js.map