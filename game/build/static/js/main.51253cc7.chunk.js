(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(9),i=n.n(r),c=n(4),o=n(7),s=n(5),l="GET_URL_PARAMS",u="ADD_ROLE",d="WIN_RESULT",p="REPEAT_ROUND",f="SET_SIZE",b={token:"",user:0,role:"",winResult:!1,repeatRound:!1,size:{}};var j=function(e){return{type:d,payload:e}},x=function(e){return{type:p,payload:e}},y="GET_GAME_STATE",O={field:{},moveRole:"master",restart:!1};var h,m,v,g,w,R,T,k,E,S,_,M,z=Object(o.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(s.a)(Object(s.a)({},e),{},{token:t.payload.token,user:t.payload.user});case u:return Object(s.a)(Object(s.a)({},e),{},{role:t.payload.role});case d:return Object(s.a)(Object(s.a)({},e),{},{winResult:t.payload});case p:return Object(s.a)(Object(s.a)({},e),{},{repeatRound:t.payload});case f:return Object(s.a)(Object(s.a)({},e),{},{size:t.payload});default:return e}},gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(s.a)(Object(s.a)({},e),{},{field:t.payload.data.field,moveRole:t.payload.data.moveRole,restart:t.payload.data.restart});default:return e}}}),B=n(19),G=n(6),A=n.n(G),F=n(8),L=function(){var e=function(){var e=Object(F.a)(A.a.mark((function e(t){var n,a,r,i,c,o=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"GET",a=o.length>2&&void 0!==o[2]?o[2]:null,r=o.length>3&&void 0!==o[3]?o[3]:{},e.prev=3,a&&(a=JSON.stringify(a),r["Content-Type"]="application/json"),e.next=7,fetch(t,{method:n,body:a,headers:r});case 7:return i=e.sent,e.next=10,i.json();case 10:return c=e.sent,e.abrupt("return",c);case 14:e.prev=14,e.t0=e.catch(3),console.log("error");case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return{postUserData:function(){var t=Object(F.a)(A.a.mark((function t(n){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("/api/session/SessionStart","POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getGameData:function(){var t=Object(F.a)(A.a.mark((function t(n){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("/api/session/GameUpdate","POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),postMoveData:function(){var t=Object(F.a)(A.a.mark((function t(n){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("/api/session/MakeMove","POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),postRepeatRound:function(){var t=Object(F.a)(A.a.mark((function t(n){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("/api/session/RepeatRound","POST",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},D=function(e){return function(t){return function(n){switch(n.type){case"GET_URL_PARAMS":var a=n.payload,r=a.token,i=a.user;(0,L().postUserData)({token:r,user:i}).then((function(t){t&&e.dispatch({type:u,payload:t})})),e.dispatch({type:"START_GAME",payload:r});break;case"REPEAT_ROUND":var c=e.getState().app,o=c.token,s=c.role;(0,L().postRepeatRound)({token:o,role:s})}t(n)}}},U={item1:{x:0,y:0},item2:{x:33,y:0},item3:{x:66,y:0},item4:{x:0,y:33},item5:{x:33,y:33},item6:{x:66,y:33},item7:{x:0,y:66},item8:{x:33,y:66},item9:{x:66,y:66}},I={item1:{x1:16.5,y1:16.5,x2:82.5,y2:16.5},item2:{x1:16.5,y1:49.5,x2:82.5,y2:49.5},item3:{x1:16.5,y1:82.5,x2:82.5,y2:82.5},item4:{x1:16.5,y1:16.5,x2:16.5,y2:82.5},item5:{x1:49.5,y1:16.5,x2:49.5,y2:82.5},item6:{x1:82.5,y1:16.5,x2:82.5,y2:82.5},item7:{x1:16.5,y1:16.5,x2:82.5,y2:82.5},item8:{x1:16.5,y1:82.5,x2:82.5,y2:16.5}},P={data:[["betType1","betType2","betType3"],["betType4","betType5","betType6"],["betType7","betType8","betType9"],["betType1","betType4","betType7"],["betType2","betType5","betType8"],["betType3","betType6","betType9"],["betType1","betType5","betType9"],["betType7","betType5","betType3"]]},C=function(e){return function(t){return function(n){switch(n.type){case"START_GAME":var a=L().getGameData,r=n.payload;setInterval((function(){a({token:r}).then((function(t){var n=e.getState().gameState;if(t&&JSON.stringify(t.data)!==JSON.stringify(n)&&t){e.dispatch({type:y,payload:t});var a=function(e){var t=!1;return P.data.map((function(n,a){var r=[];return n.map((function(t,n){return r.push(e[t]?e[t]:n)})),r.every((function(e,t,n){return e===n[0]}))?t={res:"x"===r[0]?"master":"guest",combination:a+1}:-1===Object.values(e).findIndex((function(e){return!1===e}))&&(t="tie"),r})),t}(t.data.field);a&&e.dispatch(j(a))}}))}),1e3);break;case"MAKE_MOVE":var i=e.getState().app.token,c=L().postMoveData,o=n.payload,s=o.newMove,l=o.field,u=o.role,d=o.moveRole,p=Object.assign({},l);p[s]="master"===u?"x":"y",c({data:{field:p,moveRole:"master"===d?"guest":"master"},token:i});break;case"GET_GAME_STATE":var f=e.getState().app,b=f.repeatRound,O=f.winResult,h=n.payload.data;Object.values(h.field).every((function(e){return"false"===e.toString()}))&&b&&O&&(e.dispatch(j(!1)),e.dispatch(x(!1)))}t(n)}}},N=[B.a,D,C],J=o.a.apply(void 0,N),X=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,V=Object(o.d)(z,X(J)),K=n(2),W=n(3),Q=n(1),Z=function(e){var t=e.num;return Object(Q.jsxs)("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 68 68",x:U["item".concat(t+1)].x+7,y:U["item".concat(t+1)].y+7,children:[Object(Q.jsx)("defs",{}),Object(Q.jsx)("g",{filter:"url(#filterX)",children:Object(Q.jsx)("path",{fill:"#4F4F4F",fillRule:"evenodd",d:"M4.879 4.995a3 3 0 000 4.243L29.639 34 4.88 58.76a3 3 0 000 4.243l.116.117a3 3 0 004.243 0l24.76-24.762L58.76 63.121a3 3 0 004.242 0l.117-.117a3 3 0 000-4.243L38.36 34l24.76-24.762a3 3 0 000-4.243l-.117-.116a3 3 0 00-4.242 0L33.999 29.64 9.238 4.88a3 3 0 00-4.243 0l-.116.116z",clipRule:"evenodd"})}),Object(Q.jsx)("path",{fill:"#9B51E0",fillRule:"evenodd",d:"M2.879 2.995a3 3 0 000 4.243L27.639 32 2.88 56.76a3 3 0 000 4.243l.116.117a3 3 0 004.243 0l24.76-24.762L56.76 61.121a3 3 0 004.242 0l.117-.117a3 3 0 000-4.243L36.36 32l24.76-24.762a3 3 0 000-4.243l-.117-.116a3 3 0 00-4.242 0L31.999 27.64 7.238 2.88a3 3 0 00-4.243 0l-.116.116z",clipRule:"evenodd"}),Object(Q.jsx)("defs",{children:Object(Q.jsxs)("filter",{id:"filterX",width:"67.998",height:"67.999",x:"0",y:"0",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[Object(Q.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(Q.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Object(Q.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur",stdDeviation:"2"})]})})]})},q=function(e){var t=e.num;return Object(Q.jsxs)("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 68 68",x:U["item".concat(t+1)].x+7,y:U["item".concat(t+1)].y+7,children:[Object(Q.jsx)("defs",{}),Object(Q.jsx)("g",{filter:"url(#filterO)",children:Object(Q.jsx)("path",{fill:"#4F4F4F",fillRule:"evenodd",d:"M34 64c16.569 0 30-13.431 30-30C64 17.431 50.569 4 34 4 17.431 4 4 17.431 4 34c0 16.569 13.431 30 30 30zm-.17-6.34c13.16 0 23.83-10.67 23.83-23.83C57.66 20.67 46.99 10 33.83 10 20.67 10 10 20.67 10 33.83c0 13.16 10.67 23.83 23.83 23.83z",clipRule:"evenodd"})}),Object(Q.jsx)("path",{fill:"#2F80ED",fillRule:"evenodd",d:"M32 62c16.569 0 30-13.431 30-30C62 15.431 48.569 2 32 2 15.431 2 2 15.431 2 32c0 16.569 13.431 30 30 30zm-.17-6.34c13.16 0 23.83-10.67 23.83-23.83C55.66 18.67 44.99 8 31.83 8 18.67 8 8 18.67 8 31.83c0 13.16 10.67 23.83 23.83 23.83z",clipRule:"evenodd"}),Object(Q.jsx)("defs",{children:Object(Q.jsxs)("filter",{id:"filterO",width:"68",height:"68",x:"0",y:"0",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[Object(Q.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(Q.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Object(Q.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur",stdDeviation:"2"})]})})]})},H=W.a.rect(h||(h=Object(K.a)(["\n  fill: none;\n  pointer-events: ",";\n"])),(function(e){return e.active?"all":"none"})),Y=function(e){var t=e.role,n=e.field,a=e.moveRole,r=Object(c.b)();return Object.entries(n).map((function(e,i){return Object(Q.jsxs)("g",{children:[Object(Q.jsx)(H,{width:"33",height:"33",x:U["item".concat(i+1)].x,y:U["item".concat(i+1)].y,active:!e[1]&&t===a,result:e[1].toString(),onClick:function(){return r({type:"MAKE_MOVE",payload:{newMove:e[0],field:n,role:t,moveRole:a}})}}),"x"===e[1]?Object(Q.jsx)(Z,{num:i}):"y"===e[1]?Object(Q.jsx)(q,{num:i}):""]},i)}))},$=Object(W.b)(m||(m=Object(K.a)(["\n  to {\n    stroke-dashoffset: 0;\n  }\n"]))),ee=W.a.g(v||(v=Object(K.a)(["\n  & line {\n    stroke-dasharray: 300;\n    stroke-dashoffset: 300;\n    animation: "," 2s ease-out forwards;\n  }\n"])),$),te=function(e){var t=e.winResult,n=e.role;return Object(Q.jsx)(ee,{children:Object(Q.jsx)("line",{x1:I["item".concat(t.combination)].x1,y1:I["item".concat(t.combination)].y1,x2:I["item".concat(t.combination)].x2,y2:I["item".concat(t.combination)].y2,stroke:t.res===n?"#219653":"#EB5757",strokeWidth:"3",strokeLinecap:"round"})})},ne=Object(W.b)(g||(g=Object(K.a)(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]))),ae=W.a.div(w||(w=Object(K.a)(["\n  width: 90%;\n  height: 50%;\n"]))),re=W.a.svg(R||(R=Object(K.a)(["\n  width: 100%;\n  height: 100%;\n  & line {\n    filter: drop-shadow(1px 1px 0.5px rgba(0, 0, 0, 0.25));\n  }\n  & g svg {\n    animation: 0.5s "," ease-out;\n  }\n"])),ne),ie=function(){var e=Object(c.c)((function(e){return{role:e.app.role||"",field:e.gameState.field||{},moveRole:e.gameState.moveRole||"",winResult:e.app.winResult||!1}})),t=e.role,n=e.field,a=e.moveRole,r=e.winResult;return Object(Q.jsx)(ae,{children:Object(Q.jsxs)(re,{viewBox:"0 0 99 99",children:[Object(Q.jsx)("line",{x1:"0",y1:"33",x2:"99",y2:"33",stroke:"#2d9cdb"}),Object(Q.jsx)("line",{x1:"0",y1:"66",x2:"99",y2:"66",stroke:"#2d9cdb"}),Object(Q.jsx)("line",{x1:"33",y1:"0",x2:"33",y2:"99",stroke:"#2d9cdb"}),Object(Q.jsx)("line",{x1:"66",y1:"0",x2:"66",y2:"99",stroke:"#2d9cdb"}),Object(Q.jsx)(Y,{moveRole:a,field:n,role:t}),r&&Object(Q.jsx)(te,{winResult:r,role:t})]})})},ce=n(11),oe=W.a.div(T||(T=Object(K.a)(["\n  text-align: center;\n  font-size: 1.5em;\n  text-transform: uppercase;\n  font-family: sans-serif;\n  font-weight: 200;\n  color: #56ccf2;\n  text-shadow: 2px 2px 4px #4f4f4f;\n  @media (orientation: landscape) {\n    font-size: 1em;\n  }\n"]))),se=W.a.div(k||(k=Object(K.a)(["\n  height: 15%;\n  display: flex;\n  align-items: center;\n"]))),le=function(){var e=Object(c.c)((function(e){return{role:e.app.role||"",moveRole:e.gameState.moveRole||"",winResult:e.app.winResult||!1}})),t=e.role,n=e.moveRole,r=e.winResult,i=Object(a.useState)(""),o=Object(ce.a)(i,2),s=o[0],l=o[1];return Object(a.useEffect)((function(){var e="";e=r?r.res===t?"\u041f\u043e\u0431\u0435\u0434\u0430!":"\u0412 \u0434\u0440\u0443\u0433\u043e\u0439 \u0440\u0430\u0437!":t===n?"\u0422\u0432\u043e\u0439 \u0445\u043e\u0434":"\u0425\u043e\u0434 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430",l(e)}),[r,t,n]),Object(Q.jsx)(se,{children:Object(Q.jsx)(oe,{children:s})})},ue=W.a.div(E||(E=Object(K.a)(["\n  height: 15%;\n  display: flex;\n  align-items: center;\n  margin: 2.5% 0;\n"]))),de=W.a.button(S||(S=Object(K.a)(["\n  position: relative;\n  background: linear-gradient(92.1deg, #2f80ed 0%, #bb6bd9 100%);\n  font-family: sans-serif;\n  font-weight: bold;\n  font-size: 24px;\n  text-transform: uppercase;\n  padding: 0.7em 3em;\n  border-radius: 1.3em;\n  border: none;\n  box-shadow: 2px 2px 4px #4f4f4f;\n  outline: none;\n  & span {\n    background: #2f2f2f;\n    color: transparent;\n    text-shadow: 2px 2px 3px #aa6edc;\n    -webkit-background-clip: text;\n    -moz-background-clip: text;\n    background-clip: text;\n  }\n  &:active {\n    box-shadow: inset 2px 2px 4px #4f4f4f;\n    & span {\n      background: transparent;\n      color: #aa6edc;\n      text-shadow: 2px 2px 3px #4f4f4f;\n    }\n  }\n  @media (orientation: landscape) {\n    font-size: 1em;\n  }\n"]))),pe=function(){var e=Object(c.c)((function(e){return{repeatRound:e.app.repeatRound||!1}})).repeatRound,t=Object(a.useState)("\u0415\u0449\u0435 \u0440\u0430\u0437"),n=Object(ce.a)(t,2),r=n[0],i=n[1],o=Object(c.b)();Object(a.useEffect)((function(){i(e?"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430":"\u0415\u0449\u0435 \u0440\u0430\u0437")}),[e]);return Object(Q.jsx)(ue,{children:e?Object(Q.jsx)(oe,{children:r}):Object(Q.jsx)(de,{onClick:function(){setTimeout((function(){o(x(!0))}),500)},children:Object(Q.jsx)("span",{children:r})})})},fe=W.a.div(_||(_=Object(K.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(345.45deg, #bb6bd9 0%, #2f80ed 100%);\n"]))),be=W.a.div(M||(M=Object(K.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  height: 100vh;\n  margin: auto;\n  width: ",";\n"])),(function(e){var t=e.size;return t?"".concat(t.width,"px"):"100%"})),je=function(){var e=Object(c.c)((function(e){return{size:e.app.size||{}}})).size;return Object(Q.jsx)(fe,{children:Object(Q.jsxs)(be,{size:e,children:[Object(Q.jsx)(le,{}),Object(Q.jsx)(ie,{}),Object(Q.jsx)(pe,{})]})})},xe=n(23),ye=n.n(xe),Oe=function(e){var t=Object(c.b)(),n=ye.a.parse(window.location.search,{ignoreQueryPrefix:!0});return Object(a.useEffect)((function(){t({type:l,payload:n})})),Object(Q.jsx)(a.Fragment,{children:e.children})},he=function(e){var t=Object(c.b)(),n=function(){var e=0;e=window.screen.width>window.screen.height?window.screen.height:window.screen.width,t({type:f,payload:{width:e}})};return Object(a.useEffect)((function(){return n(),window.addEventListener("resize",n,!0),function(){return window.removeEventListener("resize",n)}})),Object(Q.jsx)(a.Fragment,{children:e.children})};i.a.render(Object(Q.jsx)(c.a,{store:V,children:Object(Q.jsx)(Oe,{children:Object(Q.jsx)(he,{children:Object(Q.jsx)(je,{})})})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.51253cc7.chunk.js.map